<!DOCTYPE html>












  


<html class="theme-next pisces use-motion" lang="zh-CN">
<head><meta name="generator" content="Hexo 3.9.0">
  <meta charset="UTF-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">








  <meta http-equiv="Cache-Control" content="no-transform">
  <meta http-equiv="Cache-Control" content="no-siteapp">

















<link rel="stylesheet" href="/lib/font-awesome/css/font-awesome.min.css?v=4.6.2">

<link rel="stylesheet" href="/css/main.css?v=7.1.1">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="32x32" href="/images/favicon-32x32-next.png?v=7.1.1">


  <link rel="icon" type="image/png" sizes="16x16" href="/images/favicon-16x16-next.png?v=7.1.1">


  <link rel="mask-icon" href="/images/logo.svg?v=7.1.1" color="#222">







<script id="hexo.configurations">
  var NexT = window.NexT || {};
  var CONFIG = {
    root: '/',
    scheme: 'Pisces',
    version: '7.1.1',
    sidebar: {"position":"left","display":"post","offset":12,"onmobile":false,"dimmer":false},
    back2top: true,
    back2top_sidebar: false,
    fancybox: false,
    fastclick: false,
    lazyload: false,
    tabs: true,
    motion: {"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"slideDownIn","post_body":"slideDownIn","coll_header":"slideLeftIn","sidebar":"slideUpIn"}},
    algolia: {
      applicationID: '',
      apiKey: '',
      indexName: '',
      hits: {"per_page":10},
      labels: {"input_placeholder":"Search for Posts","hits_empty":"We didn't find any results for the search: ${query}","hits_stats":"${hits} results found in ${time} ms"}
    }
  };
</script>


  




  <meta property="og:type" content="website">
<meta property="og:title" content="lei&#39;s blog site">
<meta property="og:url" content="http://huang-ray.com/index.html">
<meta property="og:site_name" content="lei&#39;s blog site">
<meta property="og:locale" content="zh-CN">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="lei&#39;s blog site">





  
  
  <link rel="canonical" href="http://huang-ray.com/">



<script id="page.configurations">
  CONFIG.page = {
    sidebar: "",
  };
</script>

  <title>lei's blog site</title>
  












  <noscript>
  <style>
  .use-motion .motion-element,
  .use-motion .brand,
  .use-motion .menu-item,
  .sidebar-inner,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-title { opacity: initial; }

  .use-motion .logo,
  .use-motion .site-title,
  .use-motion .site-subtitle {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line-before i { left: initial; }
  .use-motion .logo-line-after i { right: initial; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-CN">

  
  
    
  

  <div class="container sidebar-position-left 
  page-home">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-wrapper">
  <div class="site-meta">
    

    <div class="custom-logo-site-title">
      <a href="/" class="brand" rel="start">
        <span class="logo-line-before"><i></i></span>
        <span class="site-title">lei's blog site</span>
        <span class="logo-line-after"><i></i></span>
      </a>
    </div>
    
    
  </div>

  <div class="site-nav-toggle">
    <button aria-label="切换导航栏">
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
      <span class="btn-bar"></span>
    </button>
  </div>
</div>



<nav class="site-nav">
  
    <ul id="menu" class="menu">
      
        
        
        
          
          <li class="menu-item menu-item-home menu-item-active">

    
    
    
      
    

    

    <a href="/" rel="section"><i class="menu-item-icon fa fa-fw fa-home"></i> <br>首页</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-about">

    
    
    
      
    

    

    <a href="/about/" rel="section"><i class="menu-item-icon fa fa-fw fa-user"></i> <br>关于</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-tags">

    
    
    
      
    

    

    <a href="/tags/" rel="section"><i class="menu-item-icon fa fa-fw fa-tags"></i> <br>标签</a>

  </li>
        
        
        
          
          <li class="menu-item menu-item-archives">

    
    
    
      
    

    

    <a href="/archives/" rel="section"><i class="menu-item-icon fa fa-fw fa-archive"></i> <br>归档</a>

  </li>

      
      
    </ul>
  

  

  
</nav>



  



</div>
    </header>

    


    <main id="main" class="main">
      <div class="main-inner">
        <div class="content-wrap">
          
            

          
          <div id="content" class="content">
            
  <section id="posts" class="posts-expand">
    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://huang-ray.com/2019/12/30/android O 实现通知并兼容低版本/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lei's blog site">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/12/30/android O 实现通知并兼容低版本/" class="post-title-link" itemprop="url">Android O 实现通知并兼容低版本</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            

            
          </span>

          

          
            
            
          

          
          
            <span id="/2019/12/30/android O 实现通知并兼容低版本/" class="leancloud_visitors" data-flag-title="Android O 实现通知并兼容低版本">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">2.5k</span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>在activity中实现按钮弹出通知</p>
<ul>
<li><p>首先activity的onCreate中首先绑定按钮</p></li></ul>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/12/30/android O 实现通知并兼容低版本/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://huang-ray.com/2019/12/30/Linux 数据库常用命令行操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lei's blog site">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/12/30/Linux 数据库常用命令行操作/" class="post-title-link" itemprop="url">Linux 数据库基本命令行操作</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            

            
          </span>

          

          
            
            
          

          
          
            <span id="/2019/12/30/Linux 数据库常用命令行操作/" class="leancloud_visitors" data-flag-title="Linux 数据库基本命令行操作">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">245</span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          <p>登录数据库: mysql -u用户名字 -p密码<br></p>
          <!--noindex-->
          
            <div class="post-button text-center">
              <a class="btn" href="/2019/12/30/Linux 数据库常用命令行操作/#more" rel="contents">
                阅读全文 &raquo;
              </a>
            </div>
          
          <!--/noindex-->
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://huang-ray.com/2019/12/30/linux文件权限操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lei's blog site">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/12/30/linux文件权限操作/" class="post-title-link" itemprop="url">linux文件权限操作</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            

            
              

              
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-12-30 18:52:46" itemprop="dateModified" datetime="2019-12-30T18:52:46+08:00">2019-12-30</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2019/12/30/linux文件权限操作/" class="leancloud_visitors" data-flag-title="linux文件权限操作">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">419</span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p><strong> 新建文件是没有可读写执行权限的灰色 </strong><br><strong> linux权限区分大小写 </strong></p>
<ul>
<li><p>u 表示该文件的拥有者，g 表示与该文件的拥有者属于同一个群体(group)者，o 表示其他以外的人，a 表示这三者皆是。<br>  把file.txt设置为所有人可读的两种写法</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">chmod ugo+r file.txt</span><br><span class="line">chmod a+r file.txt</span><br></pre></td></tr></table></figure>
</li>
<li><p>r 表示可读取，w 表示可写入，x 表示可执行，X 只有在文件是目录或对一些用户已经有执行权限的时候执行/搜索？<br>  新建test.sh想执行时</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod +x test.sh</span><br></pre></td></tr></table></figure>
</li>
<li><p>加号+ 表示增加权限、- 表示取消权限、= 表示唯一设定权限。<br>  想取消给test.sh的可执行权限时</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod -x test.sh</span><br></pre></td></tr></table></figure>
<p>  想给file文件夹和里面所有东西可写操作时</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod -R +w file</span><br></pre></td></tr></table></figure>
</li>
<li><p>数字型写法<br>  给file文件夹和里面所有文件所有权限</p>
  <figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod -R 777 file</span><br></pre></td></tr></table></figure>
</li>
</ul>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://huang-ray.com/2019/11/29/hexo-怎么本地修改预览/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lei's blog site">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/11/29/hexo-怎么本地修改预览/" class="post-title-link" itemprop="url">hexo 怎么本地修改预览</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            

            
              

              
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-12-30 18:52:46" itemprop="dateModified" datetime="2019-12-30T18:52:46+08:00">2019-12-30</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2019/11/29/hexo-怎么本地修改预览/" class="leancloud_visitors" data-flag-title="hexo 怎么本地修改预览">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">158</span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="打包并提交"><a href="#打包并提交" class="headerlink" title="打包并提交"></a>打包并提交</h3><pre><code>hexo d -g // deploy generate
</code></pre><h3 id="本地查看"><a href="#本地查看" class="headerlink" title="本地查看"></a>本地查看</h3><pre><code>hexo s // server 默认是http://localhost:4000/
hexo s -p 5000 // 修改端口查看 修改后ctrl+s后刷新就行
</code></pre><h3 id="新建post"><a href="#新建post" class="headerlink" title="新建post"></a>新建post</h3><pre><code>hexo new post &quot;输入名字&quot;
</code></pre>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://huang-ray.com/2019/11/29/Android-WindowMangerService-Window流程分析一/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lei's blog site">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/11/29/Android-WindowMangerService-Window流程分析一/" class="post-title-link" itemprop="url">Android WindowMangerService Window流程分析一</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            

            
              

              
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-12-30 18:52:46" itemprop="dateModified" datetime="2019-12-30T18:52:46+08:00">2019-12-30</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2019/11/29/Android-WindowMangerService-Window流程分析一/" class="leancloud_visitors" data-flag-title="Android WindowMangerService Window流程分析一">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">10k</span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>先从安卓系统启动开始 – 源码参考android sdk29</p>
<h3 id="SystemServer启动流程"><a href="#SystemServer启动流程" class="headerlink" title="SystemServer启动流程"></a>SystemServer启动流程</h3><p>Android本质上是基于linux操作系统，理论上大值启动过程与linux差不多，不同的是Android采用的是嵌入式设备，没有PC上的BIOS等设备，取而代之的是叫做Bootloader的系统启动加载器，用于初始化硬件设备，为加载内核做好准备。</p>
<p>1️⃣ 按下电源开机通电 –&gt; 2⃣️ 加载引导程序Bootloader到内存 –&gt; 3⃣️ Bootloader拉起linux内核 –&gt; 4⃣️ 启动系统进程 –&gt; 5⃣️ 第一个用户空间进程 init进程</p>
<p><font bgcolor="yellow"><b>Bootloader:</b></font>  引导程序并不隶属于 Android 系统，它的作用是初始化硬件设备，加载内核文件等，为系统内核启动搭建好所需的环境。Bootloader 引导程序是 Android 系统开机运行的第一个程序，它是针对特定的主板与芯片的，因此，对于不同的设备制造商，它们的引导程序都是不同的。当前比较受欢迎的引导程序有 uboot(现有整机使用)，redboot 等。</p>
<p><font bgcolor="yellow"><b>Linux内核:</b></font>  Linux 内核开始启动，初始化各种软硬件环境，加载驱动程序，挂载根文件系统等，最重要的是，内核启动完成后，它会在系统文件中寻找 ”init” 文件，然后启动 init 进程。到此，Android 新世界正式开启。</p>
<p><font bgcolor="yellow"><b>init进程:</b></font>  Linux用户空间的第一个进程，进程号固定为 1，PID始终为1。init 进程有两个责任，一是挂载目录，比如/sys、/dev、/proc，二是运行 init.rc 脚本（init 进程在解析 init.rc 脚本时，会创建 Zygote 进程）<br><img src="/2019/11/29/Android-WindowMangerService-Window流程分析一/1.png" alt></p>
<p><font bgcolor="yellow"><b>Zygote进程:</b></font>  init 进程在解析 init.rc 脚本时，会创建 Zygote 进程，只有该进程才会建立起真正的 Android 运行空间，它是 Android 系统最重要的进程之一。后续 Android 中的应用进程都是由 Zygote 进程 Fork 出来的，因此，Zygote 是 Android 系统所有应用的父进程（即 Java 进程的鼻祖）</p>
<p>“所有的Java应用程序进程及系统服务SystemServer进程都由Zygote进程通过fork孵化而来”</p>
<p>init.zygote64_32.rc<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">service zygote /system/bin/app_process64 -Xzygote /system/bin --zygote --start-system-server --socket-name=zygote</span><br><span class="line">    class main</span><br><span class="line">    priority -20</span><br><span class="line">    user root</span><br><span class="line">    group root readproc</span><br><span class="line">    socket zygote stream 660 root system</span><br><span class="line">...</span><br></pre></td></tr></table></figure></p>
<p>Zygote由ini进程通过解析init.rc调用app_process64可执行文件，生成对应的zygote进程，具体位置<br>frameworks/base/cmds/app_process/app_main.cpp<br><img src="/2019/11/29/Android-WindowMangerService-Window流程分析一/2.png" alt><br><strong>？</strong>zygote既然由app_process启动，进程为什么不叫app_process，却叫zygote？<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">app_main.cpp#main    </span><br><span class="line">//niceName不空，比如zygote进程。</span><br><span class="line">if (!niceName.isEmpty()) &#123;</span><br><span class="line">     //此处把app_process进程名，改为zygote，见 注② 这就是上述说得改名操作</span><br><span class="line">     runtime.setArgv0(niceName.string(), true /* setProcName */);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>另外一点是app_process可以直接启动jar包，如monkey的启动脚本，vysor的录屏等都是采用了此方式<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">/system/bin/monkey</span><br><span class="line">base=/system</span><br><span class="line">export CLASSPATH=$base/framework/monkey.jar</span><br><span class="line">exec app_process $base/bin com.android.commands.monkey.Monkey &quot;$@&quot;</span><br></pre></td></tr></table></figure></p>
<p><em>zygote创建了Android的java世界，因此zygote必须完成JVM虚拟机的创建，然后孵化出java世界的第一个进程SystemServer</em></p>
<h4 id="zygote分类"><a href="#zygote分类" class="headerlink" title="zygote分类"></a>zygote分类</h4><p>native:  JVM虚拟机 注册JNI函数                    // 开始跑java代码<br>java层:  ZygoteInit#main() fork出systemServer 预加载需要的类和资源<br>             ZygoteInit#main() -&gt; zygoteServer.runSelectLoop(..) 等待socket连接 fork出apk程序进程</p>
<h4 id="SystemServer进程"><a href="#SystemServer进程" class="headerlink" title="SystemServer进程:"></a>SystemServer进程:</h4><p>SystemServer 的主要的作用是启动各种系统服务，比如 ActivityManagerService，PackageManagerService，WindowManagerService 以及硬件相关的 Service 等服务，我们平时熟知的各种系统服务其实都是在 SystemServer 进程中启动的<br><img src="/2019/11/29/Android-WindowMangerService-Window流程分析一/3.png" alt></p>
<p>Android 平台的主要组件<br><img src="/2019/11/29/Android-WindowMangerService-Window流程分析一/4.png" alt></p>
<h3 id="WindowManagerService启动"><a href="#WindowManagerService启动" class="headerlink" title="WindowManagerService启动"></a>WindowManagerService启动</h3><p><font bgcolor="orange"><b>创建过程:</b></font> SystemServer#startOtherServices()，通过调用WindowManagerService#main()返回自己的静态实例<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">private void startOtherServices() &#123;</span><br><span class="line">     ......</span><br><span class="line">     WindowManagerService wm = null;</span><br><span class="line">     ......</span><br><span class="line"></span><br><span class="line">     wm = WindowManagerService.main(context, inputManager,</span><br><span class="line">                    mFactoryTestMode != FactoryTest.FACTORY_TEST_LOW_LEVEL...);</span><br><span class="line"></span><br><span class="line">     ServiceManager.addService(Context.WINDOW_SERVICE, wm); //注册服务</span><br><span class="line"></span><br><span class="line">     ......</span><br><span class="line"></span><br><span class="line">     mActivityManagerService.setWindowManager(wm); //和ActivityManagerService进行关联</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">     ......</span><br><span class="line"></span><br><span class="line">     try &#123;</span><br><span class="line">         wm.displayReady();  //初始化显示信息，尺寸，位置等</span><br><span class="line">     &#125; catch (Throwable e) &#123;</span><br><span class="line">        reportWtf(&quot;making display ready&quot;, e);</span><br><span class="line"></span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     ......</span><br><span class="line"></span><br><span class="line">     try &#123;</span><br><span class="line">         wm.systemReady(); //通知WMS系统的初始化工作已完成</span><br><span class="line">     &#125; catch (Throwable e) &#123;</span><br><span class="line">         reportWtf(&quot;making Window Manager Service ready&quot;, e);</span><br><span class="line"></span><br><span class="line">     &#125;</span><br><span class="line"></span><br><span class="line">     ......</span><br><span class="line"></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<h4 id="S端存储"><a href="#S端存储" class="headerlink" title="S端存储:"></a>S端存储:</h4><p>通过ServiceManager BinderInternal#public static final native IBinder getContextObject(); 拿到binder  -&gt; 把实例存到Native层的ServiceManager</p>
<h4 id="C端获取"><a href="#C端获取" class="headerlink" title="C端获取:"></a>C端获取:</h4><p>ContextImpl SystemServiceRegistry#static代码中通过ServiceManager获取所有service存到hashmap缓存</p>
<h4 id="WMS重要成员"><a href="#WMS重要成员" class="headerlink" title="WMS重要成员"></a>WMS重要成员</h4><p>// appWindowToken 应用窗口token 如果是系统窗口则同windowToken 没有应用窗口就是null<br>// windowToken 窗口token 根据token判断哪些窗口要一起管理</p>
<pre><code>- AppWindowToken extend WindowToken
</code></pre><p>// 代表一个活动的client会话<br>// 对应每个进程的单例对象WindowMangaerGlobal</p>
<pre><code>- Session
</code></pre><p>// 与显示的窗口对应 持有WindowToken,Session,IWindow等对象</p>
<pre><code>- WindowState
</code></pre><p><img src="/2019/11/29/Android-WindowMangerService-Window流程分析一/5.jpg" alt><br>// 提供所有UI行为的管理 如window层级控制<br>WindowManagerPolicy mPolicy;</p>
<p>// 管理动画<br>WindowAnimator mAnimator;</p>
<p>// 设备窗口层次结构的根结点 继承WindowContainer&lt;DisplayContent-对应一个抽象意义上的显示屏 持有windowState&gt;.<br>RootWindowContainer mRoot;</p>
<h3 id="Window基本原理"><a href="#Window基本原理" class="headerlink" title="Window基本原理"></a>Window基本原理</h3><h4 id="基本概念"><a href="#基本概念" class="headerlink" title="基本概念 -"></a>基本概念 -</h4><p>所有视图的基石，在Android中Window表示一个窗口，我们日常使用的activity就会绑定一个window实例，用来管理activity中的相关视图<br>                    抽象类 唯一实现是PhoneWindow </p>
<h4 id="类别"><a href="#类别" class="headerlink" title="类别 -"></a>类别 -</h4><p>应用Window 对应一个Activity<br>           子Window 依附在父Window中<br>           系统Window 需要声明权限  <uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"><br>             6.0以上的 动态获取        </uses-permission></p>
<p><img src="/2019/11/29/Android-WindowMangerService-Window流程分析一/6.png" alt></p>
<p>Activity中持有WindowManager与Window的引用，Window通过直接new PhoneWindow得到，WindowManager通过Window提供的接口取得<br>PhoneWindow中有一系列的成员变量，一般是各种回调，是通过Activity直接设置过来的，都是Activity相同实例。然后Activity通过Window的方法实现初始化Window中的成员变量WindowManager<br>WindowManager通过上述方法，在创建Window成员变量WindowManager的同时，把Window设置给WindowManager实现双向关联</p>
<p><img src="/2019/11/29/Android-WindowMangerService-Window流程分析一/7.png" alt></p>
<h4 id="创建过程"><a href="#创建过程" class="headerlink" title="创建过程 -"></a>创建过程 -</h4><p>Activity  在ActivityThread#performLaunchActivity  Activity#attach(..)   new PhoneWindow()<br>                   在phoneWindow中创建decorView 如果mPendingRemoveWindow不为空 复用decorView token<br>                   在ActivityThread#handleResumeActivity(…) 将mDecor和属性add到wm -&gt; Activity#makeVisible()设置视图可见</p>
<p>Dialog Dialog#dialog()  new PhoneWindow()  需要传入activity的context拿到token<br>                   也是通过 PhoneWindow#setContentView()  设置视图<br>                   在show方法中将mDecor和属性加到wm </p>
<p>PopUpWindow#showAsDropDown(View chchor)  通过传入的view拿到token</p>
<p>Toast 系统window  层级 WindowManager.LayoutParams.TYPE_TOAST  +5</p>
<h4 id="组成"><a href="#组成" class="headerlink" title="组成 -"></a>组成 -</h4><p>顶层view DecorView extends FrameLayout<br>             PhoneWindow#setContentView()  设置视图到 ViewGroup mContentParent</p>
<h4 id="添加过程"><a href="#添加过程" class="headerlink" title="添加过程 -"></a>添加过程 -</h4><p>调用wm的addView(View v, LayoutParams p)  -&gt; WindowManagerGlobal#addView(v, p, mParentWindow)<br>                      -&gt; ViewRootImpl#setView(…) -&gt; Session#addToDisplay(…) -&gt;  WindowManagerService#addWindow(…)                                WindowManagerGlobal 每个进程都只有一个 实现window的三大操作<br>                      ViewRootImp 每个window都有个 复制View的绘制<br>                      Session 实现WindowSession  和windowManagerService通信</p>
<h4 id="window-层级"><a href="#window-层级" class="headerlink" title="window 层级"></a>window 层级</h4><h5 id="应用窗口"><a href="#应用窗口" class="headerlink" title="应用窗口"></a>应用窗口</h5><pre><code>应用程序窗口。
public static final int FIRST_APPLICATION_WINDOW = 1;

所有程序窗口的“基地”窗口，其他应用程序窗口都显示在它上面。     
public static final int TYPE_BASE_APPLICATION   =1;       
...
应用程序窗口结束。
public static final int LAST_APPLICATION_WINDOW = 99;
</code></pre><h5 id="子窗口层级"><a href="#子窗口层级" class="headerlink" title="子窗口层级"></a>子窗口层级</h5><pre><code>...
面板窗口，显示于宿主窗口上层。
public static final int TYPE_APPLICATION_PANEL  = FIRST_SUB_WINDOW;
...

应用程序窗口的子面板。显示于所有面板窗口的上层。（GUI的一般规律，越“子”越靠上）
public static final int TYPE_APPLICATION_SUB_PANEL = FIRST_SUB_WINDOW +2;
 ...

媒体信息。显示在媒体层和程序窗口之间，需要实现透明（半透明）效果。（例如显示字幕）
public static final int TYPE_APPLICATION_MEDIA_OVERLAY  = FIRST_SUB_WINDOW +4;

子窗口结束。（ End of types of sub-windows ）
public static final int LAST_SUB_WINDOW        = 1999;
</code></pre><h5 id="系统窗口层级"><a href="#系统窗口层级" class="headerlink" title="系统窗口层级"></a>系统窗口层级</h5><pre><code> 系统窗口。非应用程序创建。
public static final int FIRST_SYSTEM_WINDOW    = 2000;
 ...

 系统提示。它总是出现在应用程序窗口之上。
 public static final int TYPE_SYSTEM_ALERT      =  FIRST_SYSTEM_WINDOW +3;

 锁屏窗口。
 public static final int TYPE_KEYGUARD          = FIRST_SYSTEM_WINDOW +4;
 ...

 系统对话框。（例如音量调节框）。
 public static final int TYPE_SYSTEM_DIALOG     =  FIRST_SYSTEM_WINDOW +8;

 锁屏时显示的对话框。
 public static final int TYPE_KEYGUARD_DIALOG   =  FIRST_SYSTEM_WINDOW +9;

 系统内部错误提示，显示于所有内容之上。
 public static final int TYPE_SYSTEM_ERROR      =  FIRST_SYSTEM_WINDOW +10;
 ...

 系统窗口结束。     public static final int LAST_SYSTEM_WINDOW     = 2999;
</code></pre><h4 id="window-flag"><a href="#window-flag" class="headerlink" title="window flag"></a>window flag</h4><p>// 该窗口后面的所有内容都会变暗。<br>public static final int FLAG_DIM_BEHIND = 0x00000002;</p>
<p>// 该窗口将永远不会获得关键的输入焦点，不拦截键或其他按钮事件<br>// 开启这个默认会开启FLAG_NOT_TOUCH_MODAL<br>public static final int FLAG_NOT_FOCUSABLE = 0x00000008;</p>
<p>// 不拦截window之外的点击事件<br>public static final int FLAG_NOT_TOUCH_MODAL = 0x00000020;</p>
<h4 id="新系统特性-特殊权限"><a href="#新系统特性-特殊权限" class="headerlink" title="新系统特性 特殊权限"></a>新系统特性 特殊权限</h4><p>安卓8 26 O 开始 系统弹窗用这个 WindowManager.LayoutParams.TYPE_APPLICATION_OVERLAY<br>             但是26之前不支持这个属性<br> 安卓6 23 M 以后权限需要动态获取 <uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"></uses-permission></p>
<p>// +8 层级往上不能直接用<br>WindowManager.LayoutParams.TYPE_SYSTEM_DIALOG<br>会报异常 permission denied for window type 2008</p>
<ul>
<li>例外 WindowManager.LayoutParams.TYPE_SYSTEM_ERROR +10 这个可以用</li>
</ul>
<h4 id="特殊方式获取和判断"><a href="#特殊方式获取和判断" class="headerlink" title="特殊方式获取和判断"></a>特殊方式获取和判断</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line">private static final int REQUEST_CODE = 1; </span><br><span class="line">private void requestAlertWindowPermission() &#123;     </span><br><span class="line">    Intent intent = new Intent(Settings.ACTION_MANAGE_OVERLAY_PERMISSION);</span><br><span class="line">    intent.setData(Uri.parse(&quot;package:&quot; + getPackageName()));</span><br><span class="line">    startActivityForResult(intent, REQUEST_CODE); </span><br><span class="line">&#125; </span><br><span class="line"></span><br><span class="line">@Override </span><br><span class="line">protected void onActivityResult(int requestCode, int resultCode, Intent data) &#123;</span><br><span class="line">   super.onActivityResult(requestCode, resultCode, data);</span><br><span class="line">   if (requestCode == REQUEST_CODE) &#123;</span><br><span class="line">     if (Settings.canDrawOverlays(this)) &#123;</span><br><span class="line">       Log.i(TAG, &quot;onActivityResult granted&quot;);</span><br><span class="line">     &#125; else &#123;</span><br><span class="line">       Log.i(TAG, &quot;onActivityResult: not granted&quot;);</span><br><span class="line">     &#125;</span><br><span class="line">   &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="常用操作1-弹出某个自定义view"><a href="#常用操作1-弹出某个自定义view" class="headerlink" title="常用操作1 弹出某个自定义view"></a>常用操作1 弹出某个自定义view</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">* 弹出系统弹窗 不需要activity的context</span><br><span class="line">*/</span><br><span class="line">public void popSystemWindow() &#123;</span><br><span class="line">    WindowManager windowManager = (WindowManager) getSystemService(WINDOW_SERVICE);</span><br><span class="line">    WindowManager.LayoutParams layoutParams = new WindowManager.LayoutParams();</span><br><span class="line">    layoutParams.type = WindowManager.LayoutParams.TYPE_SYSTEM_ALERT;</span><br><span class="line">    layoutParams.height = 100;</span><br><span class="line">    layoutParams.width = 100;</span><br><span class="line">    layoutParams.x = Gravity.CENTER;</span><br><span class="line">    layoutParams.y = Gravity.CENTER;</span><br><span class="line">    final Button button = new Button(this);</span><br><span class="line">    button.setBackground(getResources().getDrawable(R.drawable.launcher));</span><br><span class="line">    windowManager.addView(button, layoutParams);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<h4 id="常用操作2-给弹出的view添加蒙层效果"><a href="#常用操作2-给弹出的view添加蒙层效果" class="headerlink" title="常用操作2 给弹出的view添加蒙层效果"></a>常用操作2 给弹出的view添加蒙层效果</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line">/*</span><br><span class="line">* 给view加类似dialog的蒙层</span><br><span class="line">* 蒙层的type层级要低于view的层级</span><br><span class="line">*/</span><br><span class="line">private void addMask(IBinder token) &#123;</span><br><span class="line">    WindowManager.LayoutParams wl = new WindowManager.LayoutParams();</span><br><span class="line">    wl.width = WindowManager.LayoutParams.MATCH_PARENT;</span><br><span class="line">    wl.height = WindowManager.LayoutParams.MATCH_PARENT;</span><br><span class="line">    wl.format = PixelFormat.TRANSLUCENT; // 不设置这个弹出框的透明遮罩显示为黑色</span><br><span class="line">    wl.type = WindowManager.LayoutParams.TYPE_APPLICATION_PANEL;</span><br><span class="line">    wl.token = token; // 获取当前Activity中的View中的token,来依附Activity</span><br><span class="line">    maskView = new View(mContext);</span><br><span class="line">    maskView.setBackgroundColor(Color.parseColor(&quot;#4D000000&quot;));</span><br><span class="line">    maskView.setFitsSystemWindows(false);</span><br><span class="line">    maskView.setOnKeyListener((v, keyCode, event) -&gt; &#123;</span><br><span class="line">        if (keyCode == KeyEvent.KEYCODE_BACK) &#123;</span><br><span class="line">            removeMask();</span><br><span class="line">        &#125;</span><br><span class="line">        return false;</span><br><span class="line">    &#125;);</span><br><span class="line">    maskView.setOnClickListener(v -&gt; &#123;</span><br><span class="line">        removeMask();</span><br><span class="line">    &#125;);</span><br><span class="line">    windowManager.addView(maskView, wl);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">/*</span><br><span class="line">* 移除蒙层</span><br><span class="line">*/</span><br><span class="line">private void removeMask() &#123;</span><br><span class="line">    if (null != maskView) &#123;</span><br><span class="line">        windowManager.removeViewImmediate(maskView);</span><br><span class="line">        maskView = null;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>也可以直接拿到activity的window设置flag WindowManager.LayoutParams.FLAG_DIM_BEHIND<br>但对activity过于复杂的应用不适用 例如note</p>
<h4 id="常用操作3-调整视图层级"><a href="#常用操作3-调整视图层级" class="headerlink" title="常用操作3 调整视图层级"></a>常用操作3 调整视图层级</h4><p>如提高dialog层级到系统层级 dialog.getWindow().setType(LayoutParams.TYPE_SYSTEM_ALERT);<br>但是要注意<br>要声明权限<uses-permission android:name="android.permission.SYSTEM_ALERT_WINDOW"><br>6.0以上的 动态获取<br>8.0换成TYPE_APPLICATION_OVERLAY</uses-permission></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://huang-ray.com/2019/11/19/adb-快捷命令脚步/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lei's blog site">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/11/19/adb-快捷命令脚步/" class="post-title-link" itemprop="url">adb 快捷命令脚本</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            

            
              

              
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-12-30 18:52:46" itemprop="dateModified" datetime="2019-12-30T18:52:46+08:00">2019-12-30</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2019/11/19/adb-快捷命令脚步/" class="leancloud_visitors" data-flag-title="adb 快捷命令脚本">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">977</span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>   建议在sdk下adb文件同层目录下新建文件叫 adbs 把下面代码copy进去<br>   使用时输入 adbs wifi 调起wifi应用<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">#!/bin/sh </span><br><span class="line">if [ $# == 0 ]; then</span><br><span class="line">   echo &quot;ps       -&gt; adb shell ps | grep $2&quot;</span><br><span class="line">   echo &quot;log 文件名    -&gt; 拉取anr和logs日志&quot;</span><br><span class="line">   echo &quot;wifi     -&gt; Wifi&quot;</span><br><span class="line">	echo &quot;mark      -&gt; easimark&quot;</span><br><span class="line">	exit</span><br><span class="line">fi</span><br><span class="line"></span><br><span class="line">case $1 in </span><br><span class="line"> 		   ps)</span><br><span class="line">			   adb shell ps | grep $2</span><br><span class="line">		    ;;</span><br><span class="line">         log)</span><br><span class="line">            DATE=$(date +%Y.%m.%d_%H.%m.%S)</span><br><span class="line">            echo $DATE</span><br><span class="line">            if [ ! &quot;~/bug_log/$2$DATE/&quot; ];then</span><br><span class="line">            mkdir -p ~/bug_log/$2$DATE/</span><br><span class="line">            fi</span><br><span class="line">            adb pull /data/system/dropbox/ ~/bug_log/$2$DATE/</span><br><span class="line">            adb pull /data/anr ~/bug_log/$2$DATE/</span><br><span class="line">            adb pull /data/logs ~/bug_log/$2$DATE/</span><br><span class="line">         ;;</span><br><span class="line">         wifi)</span><br><span class="line">         adb shell am start com.android.settings/com.android.settings.wifi.WifiSettings</span><br><span class="line">         ;;</span><br><span class="line">         mark)</span><br><span class="line">         adb shell am startservice -W com.seewo.easimark/.MarkService</span><br><span class="line">         ;;</span><br><span class="line">         *)</span><br><span class="line">         echo &quot;No command&quot;</span><br><span class="line">         ;;</span><br><span class="line"> esac</span><br></pre></td></tr></table></figure></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://huang-ray.com/2019/11/16/android-studio-自用插件备份/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lei's blog site">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/11/16/android-studio-自用插件备份/" class="post-title-link" itemprop="url">android studio 自用插件备份</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            

            
              

              
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-12-30 18:52:46" itemprop="dateModified" datetime="2019-12-30T18:52:46+08:00">2019-12-30</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2019/11/16/android-studio-自用插件备份/" class="leancloud_visitors" data-flag-title="android studio 自用插件备份">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">1.4k</span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h3 id="Android-ButterKnife-Zelezny"><a href="#Android-ButterKnife-Zelezny" class="headerlink" title="Android ButterKnife Zelezny"></a>Android ButterKnife Zelezny</h3><pre><code>Plugin for generating ButterKnife injections from selected layout XMLs in activities/fragments/adapters.
</code></pre><h3 id="BashSupport"><a href="#BashSupport" class="headerlink" title="BashSupport"></a>BashSupport</h3><pre><code>Supports run configurations, syntax highlighting, rename refactoring, documentation lookup, inspections, quickfixes and much more.
</code></pre><h3 id="Codota"><a href="#Codota" class="headerlink" title="Codota"></a>Codota</h3><pre><code>自动联想代码
Install on IntelliJ and Android Studio to get advanced Java code completions
</code></pre><h3 id="GitToolBox"><a href="#GitToolBox" class="headerlink" title="GitToolBox"></a>GitToolBox</h3><pre><code>在project目录下 显示每个目录当前所在分支 待pull的commit数量
Status display, auto fetch, inline blame annotation, commit dialog completion, behind notifications and more...
</code></pre><h3 id="GsonFormat"><a href="#GsonFormat" class="headerlink" title="GsonFormat"></a>GsonFormat</h3><pre><code>一键生成bean代码
Status display, auto fetch, inline blame annotation, commit dialog completion, behind notifications and more...
</code></pre><h3 id="JavaDoc"><a href="#JavaDoc" class="headerlink" title="JavaDoc"></a>JavaDoc</h3><pre><code>Plugin that generates java docs on java class elements, like field, method, etc.
</code></pre><h3 id="Markdown-Navigator"><a href="#Markdown-Navigator" class="headerlink" title="Markdown Navigator"></a>Markdown Navigator</h3><pre><code>Markdown language support for IntelliJ platform
A Markdown plugin with GFM and a matching preview style.
Get Markdown Navigator enhanced edition to unlock all productivity features.
</code></pre><h3 id="SonarLint"><a href="#SonarLint" class="headerlink" title="SonarLint"></a>SonarLint</h3><pre><code>不规范代码检查插件
SonarLint is an IDE extension that helps you detect and fix quality issues as you write code. Like a spell checker, SonarLint squiggles flaws so they can be fixed before committing code. You can get it directly from the IntelliJ IDEA Plugin Repository, and it will then detect new bugs and quality issues as you code (Java, Kotlin, Ruby, JavaScript, PHP and Python).
</code></pre><h3 id="Translation"><a href="#Translation" class="headerlink" title="Translation"></a>Translation</h3><pre><code>右键翻译英文 或者中译英并替换
</code></pre>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://huang-ray.com/2019/10/31/git-找回drop了的stash/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lei's blog site">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/10/31/git-找回drop了的stash/" class="post-title-link" itemprop="url">找回git误操作丢失的代码</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            

            
              

              
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-12-30 18:58:27" itemprop="dateModified" datetime="2019-12-30T18:58:27+08:00">2019-12-30</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2019/10/31/git-找回drop了的stash/" class="leancloud_visitors" data-flag-title="找回git误操作丢失的代码">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">690</span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <p>##找回git checkout丢失的代码<br>git reflog<br>git reset –hard HEAD@{1} 1或者其他最近的数字</p>
<p>##找回drop了的stash</p>
<p>数据类型    含义<br>blobs    每个blob代表一个（版本的）文件，blob只包含文件的数据，而忽略文件的其他元数据，如名字、路径、格式等。<br>trees    每个tree代表了一个目录的信息，包含了此目录下的blobs，子目录（对应于子trees），文件名、路径等元数据。因此，对于有子目录的目录，git相当于存储了嵌套的trees。<br>commits    每个commit记录了提交一个更新的所有元数据，如指向的tree，父commit，作者、提交者、提交日期、提交日志等。每次提交都指向一个tree对象，记录了当次提交时的目录信息。一个commit可以有多个（至少一个）父commits。<br>tags    tag用于给某个上述类型的对象指配一个便于开发者记忆的名字, 通常用于某次commit。</p>
<h3 id="查找所有unreachable记录"><a href="#查找所有unreachable记录" class="headerlink" title="查找所有unreachable记录"></a>查找所有unreachable记录</h3><pre><code>git fsck --unreachable
</code></pre><h3 id="git-show-hash码"><a href="#git-show-hash码" class="headerlink" title="git show hash码"></a>git show hash码</h3><pre><code>主要针对commit类型查看 - 可用 git cat-file commit hash码
</code></pre><h3 id="git-stash-apply-hash码"><a href="#git-stash-apply-hash码" class="headerlink" title="git stash apply hash码"></a>git stash apply hash码</h3><pre><code>一般也是针对commit类型的
也可先git branch 分支名 hash码 再git merge 分支名
</code></pre><p><a href="https://stackoverflow.com/questions/89332/how-to-recover-a-dropped-stash-in-git" target="_blank" rel="noopener">https://stackoverflow.com/questions/89332/how-to-recover-a-dropped-stash-in-git</a></p>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://huang-ray.com/2019/09/27/文件处理主意点/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lei's blog site">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/09/27/文件处理主意点/" class="post-title-link" itemprop="url">文件处理注意点</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            

            
              

              
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-12-30 18:52:46" itemprop="dateModified" datetime="2019-12-30T18:52:46+08:00">2019-12-30</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2019/09/27/文件处理主意点/" class="leancloud_visitors" data-flag-title="文件处理注意点">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">156</span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="文件不存在时-不能判断是否是isdirectory"><a href="#文件不存在时-不能判断是否是isdirectory" class="headerlink" title="文件不存在时 不能判断是否是isdirectory"></a>文件不存在时 不能判断是否是isdirectory</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">File file = new File(&quot;路径&quot;);</span><br><span class="line">if(!file.exites())&#123;</span><br><span class="line">	// 这么判断是有问题的</span><br><span class="line">	if(file.isdirectory())&#123;</span><br><span class="line">		file.mkdir();</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
      

  

  
  
  

  

  <article class="post post-type-normal" itemscope itemtype="http://schema.org/Article">
  
  
  
  <div class="post-block">
    <link itemprop="mainEntityOfPage" href="http://huang-ray.com/2019/09/04/git常用操作/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="name" content="lei">
      <meta itemprop="description" content>
      <meta itemprop="image" content="/images/avatar.png">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="lei's blog site">
    </span>

    
      <header class="post-header">

        
        
          <h2 class="post-title" itemprop="name headline">
                
                
                <a href="/2019/09/04/git常用操作/" class="post-title-link" itemprop="url">git常用操作</a>
              
            
          </h2>
        

        <div class="post-meta">
          <span class="post-time">

            
            
            

            

            
              

              
                

                <span class="post-meta-item-icon">
                  <i class="fa fa-calendar-check-o"></i>
                </span>
                
                  <span class="post-meta-item-text">更新于</span>
                
                <time title="修改时间：2019-12-30 18:52:46" itemprop="dateModified" datetime="2019-12-30T18:52:46+08:00">2019-12-30</time>
              
            
          </span>

          

          
            
            
          

          
          
            <span id="/2019/09/04/git常用操作/" class="leancloud_visitors" data-flag-title="git常用操作">
              <span class="post-meta-divider">|</span>
              <span class="post-meta-item-icon">
                <i class="fa fa-eye"></i>
              </span>
              
                <span class="post-meta-item-text">阅读次数：</span>
              
                <span class="leancloud-visitors-count"></span>
            </span>
          

          

          
            <div class="post-symbolscount">
              
                <span class="post-meta-divider">|</span>
              

              
                <span class="post-meta-item-icon">
                  <i class="fa fa-file-word-o"></i>
                </span>
                
                  <span class="post-meta-item-text">本文字数：</span>
                
                <span title="本文字数">917</span>
              

              

              
            </div>
          

          

        </div>
      </header>
    

    
    
    
    <div class="post-body" itemprop="articleBody">

      
      

      
        
          
            <h4 id="commit提交"><a href="#commit提交" class="headerlink" title="commit提交"></a>commit提交</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">// 查看commit历史信息</span><br><span class="line">git log</span><br><span class="line">// 查看 commit了的文件 修改了还没commit的文件  没有add的文件</span><br><span class="line">git status</span><br><span class="line">// 打tag 先提交commit </span><br><span class="line">git tag -a 1.0.0 -m &quot;备注 可不加&quot;</span><br><span class="line">- os组的要在tag里标注好渠道如 &quot;commit的备注&quot; [publish] platform=811 customer=客户名称 flavor=渠道名称</span><br><span class="line">git push  </span><br><span class="line">git push --tags  也可在push后指定分支   </span><br><span class="line">&lt;font color=red&gt;一般一个tag触发一次编译 补东西时也提下tag&lt;/font&gt;</span><br></pre></td></tr></table></figure>
<h4 id="本地撤销commit"><a href="#本地撤销commit" class="headerlink" title="本地撤销commit"></a>本地撤销commit</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">// 回退一个commit同时撤销修改的代码</span><br><span class="line">git reset --hard HEAD~</span><br><span class="line">// 回退两个commit</span><br><span class="line">git reset --hard HEAD~~</span><br><span class="line"> - 如果这时候想跳到远程最新commit 直接 git pull</span><br><span class="line">// 回退一个commit 代码不变</span><br><span class="line">git reset --soft HEAD~</span><br><span class="line">// 回退一个commit 代码不变 当前面两个reset都回不到你想要的commit时用这个</span><br><span class="line">git reset --hard commit号</span><br><span class="line">// 新建commit抵消指定commit </span><br><span class="line">git revert commit号</span><br><span class="line">// push后 reset后stash再强制推送本地版本 会清空所有其他人后面的提交</span><br><span class="line">git push origin 分支 --force</span><br></pre></td></tr></table></figure>
<h4 id="本地暂存代码"><a href="#本地暂存代码" class="headerlink" title="本地暂存代码"></a>本地暂存代码</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">// 保存当前进度</span><br><span class="line">git stash</span><br><span class="line">// 恢复最新进度到工作区</span><br><span class="line">git stash pop</span><br></pre></td></tr></table></figure>
<h4 id="建立-删除-切换分支"><a href="#建立-删除-切换分支" class="headerlink" title="建立 删除 切换分支"></a>建立 删除 切换分支</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">// 新建分支</span><br><span class="line">git branch 分支名</span><br><span class="line">// 切换分支</span><br><span class="line">git checkout 分支名</span><br><span class="line">// 推送分支到远程</span><br><span class="line">git push origin 分支名</span><br><span class="line">// 删除远程分支</span><br><span class="line">git push origin --delete 分支名</span><br><span class="line">// 删除本地分支：</span><br><span class="line">git branch -d 分支名（remotes/origin/分支名）</span><br><span class="line">// 强制删本地：</span><br><span class="line">git branch -D 分支名</span><br></pre></td></tr></table></figure>

          
        
      
    </div>

    

    
    
    

    

    
      
    
    

    

    <footer class="post-footer">
      

      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </div>
  
  
  
  </article>


    
  </section>

  
  <nav class="pagination">
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="page-number" href="/page/3/">3</a><a class="extend next" rel="next" href="/page/2/"><i class="fa fa-angle-right" aria-label="下一页"></i></a>
  </nav>



          </div>
          

        </div>
        
          
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <div class="site-overview-wrap sidebar-panel sidebar-panel-active">
        <div class="site-overview">
          <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
            
              <img class="site-author-image" itemprop="image" src="/images/avatar.png" alt="lei">
            
              <p class="site-author-name" itemprop="name">lei</p>
              <div class="site-description motion-element" itemprop="description"></div>
          </div>

          
            <nav class="site-state motion-element">
              
                <div class="site-state-item site-state-posts">
                
                  <a href="/archives/">
                
                    <span class="site-state-item-count">22</span>
                    <span class="site-state-item-name">日志</span>
                  </a>
                </div>
              

              

              
                
                
                <div class="site-state-item site-state-tags">
                  
                    
                      <a href="/tags/">
                    
                  
                    
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                      
                    
                    <span class="site-state-item-count">23</span>
                    <span class="site-state-item-name">标签</span>
                  </a>
                </div>
              
            </nav>
          

          

          

          
            <div class="links-of-author motion-element">
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="https://github.com/autumnLei" title="GitHub &rarr; https://github.com/autumnLei" rel="noopener" target="_blank"><i class="fa fa-fw fa-github"></i></a>
                </span>
              
                <span class="links-of-author-item">
                  
                  
                  
                    
                  
                  <a href="mailto:july.breeze.hl@gmail.com" title="E-Mail &rarr; mailto:july.breeze.hl@gmail.com" rel="noopener" target="_blank"><i class="fa fa-fw fa-envelope"></i></a>
                </span>
              
            </div>
          

          

          
          

          
            
          
          

        </div>
      </div>

      

      

    </div>
  </aside>
  


        
      </div>
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">&copy; <span itemprop="copyrightYear">2019</span>
  <span class="with-love" id="animate">
    <i class="fa fa-mars"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">lei</span>

  
    <span class="post-meta-divider">|</span>
    <span class="post-meta-item-icon">
      <i class="fa fa-area-chart"></i>
    </span>
    
      <span class="post-meta-item-text">站点总字数：</span>
    
    <span title="站点总字数">32k</span>
  

  
</div>









        








        
      </div>
    </footer>

    
      <div class="back-to-top">
        <i class="fa fa-arrow-up"></i>
        
      </div>
    

    

    

    
  </div>

  

<script>
  if (Object.prototype.toString.call(window.Promise) !== '[object Function]') {
    window.Promise = null;
  }
</script>














  
    
    
  
  <script color="0,0,255" opacity="0.5" zindex="-1" count="99" src="/lib/canvas-nest/canvas-nest.min.js"></script>













  
  <script src="/lib/jquery/index.js?v=2.1.3"></script>

  
  <script src="/lib/velocity/velocity.min.js?v=1.2.1"></script>

  
  <script src="/lib/velocity/velocity.ui.min.js?v=1.2.1"></script>


  


  <script src="/js/utils.js?v=7.1.1"></script>

  <script src="/js/motion.js?v=7.1.1"></script>



  
  


  <script src="/js/affix.js?v=7.1.1"></script>

  <script src="/js/schemes/pisces.js?v=7.1.1"></script>



  

  


  <script src="/js/next-boot.js?v=7.1.1"></script>


  

  

  

  



  




  
  
  <script>
    
    function showTime(Counter) {
      var entries = [];
      var $visitors = $('.leancloud_visitors');

      $visitors.each(function() {
        entries.push( $(this).attr('id').trim() );
      });

      Counter('get', '/classes/Counter', { where: JSON.stringify({ url: { '$in': entries } }) })
        .done(function({ results }) {
          var COUNT_CONTAINER_REF = '.leancloud-visitors-count';

          if (results.length === 0) {
            $visitors.find(COUNT_CONTAINER_REF).text(0);
            return;
          }

          for (var i = 0; i < results.length; i++) {
            var item = results[i];
            var url = item.url;
            var time = item.time;
            var element = document.getElementById(url);

            $(element).find(COUNT_CONTAINER_REF).text(time);
          }
          for (var i = 0; i < entries.length; i++) {
            var url = entries[i];
            var element = document.getElementById(url);
            var countSpan = $(element).find(COUNT_CONTAINER_REF);
            if (countSpan.text() == '') {
              countSpan.text(0);
            }
          }
        })
        .fail(function ({ responseJSON }) {
          console.log('LeanCloud Counter Error: ' + responseJSON.code + ' ' + responseJSON.error);
        });
    }
    

    $(function() {
      $.get('https://app-router.leancloud.cn/2/route?appId=' + 'Y4fHio6MUSVvN3JtspgMLcko-gzGzoHsz')
        .done(function({ api_server }) {
          var Counter = function(method, url, data) {
            return $.ajax({
              method: method,
              url: 'https://' + api_server + '/1.1' + url,
              headers: {
                'X-LC-Id': 'Y4fHio6MUSVvN3JtspgMLcko-gzGzoHsz',
                'X-LC-Key': 'fsf9AbkLS83tzAvqEMa48m7r',
                'Content-Type': 'application/json',
              },
              data: data
            });
          };
          
            if ($('.post-title-link').length >= 1) {
              showTime(Counter);
            }
          
        });
    });
  </script>



  

  

  

  

  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>


  

  

  

  

  

  

  

  

</body>
</html>
